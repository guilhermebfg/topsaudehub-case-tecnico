<p-table [value]="customers.items" [lazy]="true" [paginator]="true" [totalRecords]="customers.total" (onLazyLoad)="loadCustomers($event)" [showCurrentPageReport]="true"
        [first]="loadCustomersPayload.first" [rows]="loadCustomersPayload.rows">
    <ng-template #header>
        <tr>
            <th pSortableColumn="id">
                ID <p-sortIcon field="id" />
            </th>
            <th pSortableColumn="name">
                Nome <p-sortIcon field="name" />
            </th>
            <th pSortableColumn="email">
                E-mail <p-sortIcon field="email" />
            </th>
            <th pSortableColumn="document">
                Documento <p-sortIcon field="document" />
            </th>
            <th pSortableColumn="created_at">
                Data de criação <p-sortIcon field="created_at" />
            </th>
            <th>
                Ações
            </th>
        </tr>
        <tr [formGroup]="customerFilter">
            <th>
                <input type="text" formControlName="id" placeholder="Igual a">
            </th>
            <th>
                <input type="text" formControlName="name" placeholder="Contem">
            </th>
            <th>
                <input type="text" formControlName="email" placeholder="Contem">
            </th>
            <th>
                <input type="text" formControlName="document" placeholder="Contem" mask="000.000.000-00 || 00.000.000/0000-00">
            </th>
            <th>
                <p-datePicker dateFormat="dd/mm/yy" [maxDate]="today" formControlName="created_min" appendTo="body" placeholder="A partir de"></p-datePicker>
            </th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template #body let-customer>
        <tr>
            <td style="max-width: 1em !important;">
                {{ customer.id }}
            </td>
            <td>
                {{ customer.name }}
            </td>
            <td>
                {{ customer.email }}
            </td>
            <td>
                {{ customer.document }}
            </td>
            <td>
                {{ customer.created_at | date: "dd/MM/yyyy HH:mm" }}
            </td>
            <td>
                <button type="button" (click)="openModalFormCustomer(customer.id)">
                    <i class="pi pi-pencil"></i>
                </button>
            </td>
        </tr>
    </ng-template>
    <ng-template #footer>
        <tr>
            <td colspan="5">

            </td>
            <td>
                <button type="button" (click)="openModalFormCustomer()">
                    Novo cliente
                </button>
            </td>
        </tr>
    </ng-template>
</p-table>

<p-dialog [(visible)]="modalCustomerFormVisible" [modal]="true" [draggable]="false" [header]="(customerId != null ? 'Editar' : 'Adicionar') + ' cliente'">
    <form (submit)="saveCustomer()" [formGroup]="customerForm" class="form-col">
        <div class="required">
            <label for="nome">Nome</label>
            <input type="text" formControlName="name">
        </div>
        <div class="required">
            <label for="email">E-mail</label>
            <input type="text" formControlName="email">
        </div>
        <div class="required">
            <label for="document">Documento</label>
            <input type="text" formControlName="document" mask="000.000.000-00 || 00.000.000/0000-00">
        </div>
        <div>
            <button type="submit">
                Salvar
            </button>
        </div>
    </form>
</p-dialog>
